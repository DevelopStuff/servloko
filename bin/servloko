#!/usr/bin/env ruby

begin
  require 'servloko'
rescue LoadError
  lib_path = File.expand_path('../../lib', __FILE__)
  $:.unshift(lib_path)
  require "servloko"
end

require 'servloko/options'
opts = Servloko::Options.parse(ARGV)

if opts[:file].nil?
  puts "You must provide a file to run"
  puts "Usage: servloko <file> [-p PORT] [-d (deamonize)]"
  exit 1
end

Servloko.start(opts[:file],opts[:port] || 3000,opts[:daemonize] || false)